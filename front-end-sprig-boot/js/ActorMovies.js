const a0_0x4321c2=a0_0x14d3;(function(_0x59f2eb,_0x418a84){const _0xd7d6f7=a0_0x14d3,_0x33734e=_0x59f2eb();while(!![]){try{const _0x5410d6=-parseInt(_0xd7d6f7(0x16e))/0x1*(parseInt(_0xd7d6f7(0x153))/0x2)+-parseInt(_0xd7d6f7(0x12b))/0x3+-parseInt(_0xd7d6f7(0x126))/0x4+-parseInt(_0xd7d6f7(0x134))/0x5*(-parseInt(_0xd7d6f7(0x16c))/0x6)+parseInt(_0xd7d6f7(0x13f))/0x7+-parseInt(_0xd7d6f7(0x124))/0x8+-parseInt(_0xd7d6f7(0x12c))/0x9*(-parseInt(_0xd7d6f7(0x173))/0xa);if(_0x5410d6===_0x418a84)break;else _0x33734e['push'](_0x33734e['shift']());}catch(_0x363f45){_0x33734e['push'](_0x33734e['shift']());}}}(a0_0x552e,0xa4bca));const API_BASE_URL=a0_0x4321c2(0x11d),relationListSection=document[a0_0x4321c2(0x11f)](a0_0x4321c2(0x16f)),relationDetailSection=document[a0_0x4321c2(0x11f)](a0_0x4321c2(0x17b)),relationFormSection=document['getElementById'](a0_0x4321c2(0x140)),relationGrid=document[a0_0x4321c2(0x11f)]('relationGrid'),detailContent=document[a0_0x4321c2(0x11f)](a0_0x4321c2(0x129)),addRelationForm=document[a0_0x4321c2(0x11f)](a0_0x4321c2(0x161)),formTitle=document[a0_0x4321c2(0x11f)](a0_0x4321c2(0x18e)),relationIdInput=document[a0_0x4321c2(0x11f)](a0_0x4321c2(0x147)),searchInput=document[a0_0x4321c2(0x11f)]('searchInput'),btnSearch=document[a0_0x4321c2(0x11f)](a0_0x4321c2(0x17c)),btnSubmit=document[a0_0x4321c2(0x11f)](a0_0x4321c2(0x139)),btnShowList=document['getElementById']('btnShowList'),btnShowForm=document[a0_0x4321c2(0x11f)](a0_0x4321c2(0x11e)),btnBackToList=document[a0_0x4321c2(0x11f)]('btnBackToList'),btnCancelForm=document[a0_0x4321c2(0x11f)]('btnCancelForm');function a0_0x14d3(_0x303ba6,_0x3911c1){const _0x552e4d=a0_0x552e();return a0_0x14d3=function(_0x14d31b,_0x3b7f9c){_0x14d31b=_0x14d31b-0x11c;let _0x522bdb=_0x552e4d[_0x14d31b];return _0x522bdb;},a0_0x14d3(_0x303ba6,_0x3911c1);}let currentView=a0_0x4321c2(0x165),relations=[],isEditMode=![];btnShowList[a0_0x4321c2(0x16a)](a0_0x4321c2(0x162),()=>showView('list')),btnShowForm['addEventListener']('click',()=>{const _0x3f01f8=a0_0x4321c2;isEditMode=![],formTitle[_0x3f01f8(0x181)]=_0x3f01f8(0x15d),showView(_0x3f01f8(0x148));}),btnBackToList[a0_0x4321c2(0x16a)](a0_0x4321c2(0x162),()=>showView(a0_0x4321c2(0x165))),btnCancelForm[a0_0x4321c2(0x16a)](a0_0x4321c2(0x162),()=>showView(a0_0x4321c2(0x165))),btnSearch[a0_0x4321c2(0x16a)](a0_0x4321c2(0x162),handleSearch),addRelationForm['addEventListener']('submit',handleFormSubmit);function showView(_0x2ba598){const _0x4a5c43=a0_0x4321c2;currentView=_0x2ba598,relationListSection[_0x4a5c43(0x144)]['add']('hidden'),relationDetailSection[_0x4a5c43(0x144)][_0x4a5c43(0x18b)](_0x4a5c43(0x143)),relationFormSection['classList'][_0x4a5c43(0x18b)](_0x4a5c43(0x143));switch(_0x2ba598){case _0x4a5c43(0x165):relationListSection[_0x4a5c43(0x144)][_0x4a5c43(0x122)](_0x4a5c43(0x143)),fetchRelations(),btnShowList[_0x4a5c43(0x144)]['add'](_0x4a5c43(0x154)),btnShowForm[_0x4a5c43(0x144)][_0x4a5c43(0x122)](_0x4a5c43(0x154));break;case _0x4a5c43(0x149):relationDetailSection['classList'][_0x4a5c43(0x122)]('hidden'),btnShowList['classList'][_0x4a5c43(0x18b)]('active'),btnShowForm[_0x4a5c43(0x144)][_0x4a5c43(0x122)](_0x4a5c43(0x154));break;case'form':relationFormSection['classList']['remove'](_0x4a5c43(0x143)),btnShowList[_0x4a5c43(0x144)][_0x4a5c43(0x122)]('active'),btnShowForm[_0x4a5c43(0x144)]['add'](_0x4a5c43(0x154));!isEditMode&&(addRelationForm[_0x4a5c43(0x14b)](),relationIdInput[_0x4a5c43(0x133)]='');break;}}async function fetchRelations(){const _0x1c06c0=a0_0x4321c2;try{relationGrid['innerHTML']=_0x1c06c0(0x180);const _0xc06dc7=await fetch(API_BASE_URL+_0x1c06c0(0x145));if(!_0xc06dc7['ok'])throw new Error('Error\x20al\x20cargar\x20relaciones');const _0x332505=await _0xc06dc7[_0x1c06c0(0x14c)]();console[_0x1c06c0(0x130)]('Respuesta\x20del\x20servidor:',_0x332505);try{relations=JSON[_0x1c06c0(0x16d)](_0x332505);}catch(_0x83cba2){console[_0x1c06c0(0x15f)](_0x1c06c0(0x127),_0x83cba2);throw new Error('Error\x20al\x20procesar\x20datos:\x20'+_0x83cba2[_0x1c06c0(0x159)]);}if(!Array[_0x1c06c0(0x157)](relations)){console[_0x1c06c0(0x15f)](_0x1c06c0(0x13b),relations);throw new Error('Formato\x20de\x20respuesta\x20incorrecto:\x20se\x20esperaba\x20un\x20array');}if(relations[_0x1c06c0(0x156)]===0x0){relationGrid[_0x1c06c0(0x184)]=_0x1c06c0(0x132);return;}renderRelations(relations);}catch(_0x29c74c){console[_0x1c06c0(0x15f)](_0x1c06c0(0x128),_0x29c74c),relationGrid[_0x1c06c0(0x184)]=_0x1c06c0(0x11c)+_0x29c74c[_0x1c06c0(0x159)]+_0x1c06c0(0x185);}}function renderRelations(_0x2b43d3){const _0x4570ce=a0_0x4321c2;relationGrid['innerHTML']='',_0x2b43d3[_0x4570ce(0x17d)](_0x141f73=>{const _0x439506=_0x4570ce;console['log']('Procesando\x20relación:',_0x141f73);const _0x26b27c=_0x141f73['id']||_0x439506(0x18f),_0x2a82d2=_0x141f73[_0x439506(0x177)]||_0x439506(0x155);let _0x4ea5f6=_0x439506(0x18a),_0x2c99bf=_0x439506(0x18a);_0x141f73[_0x439506(0x189)]&&(_0x2c99bf=_0x141f73[_0x439506(0x189)]['id']||_0x439506(0x18a),_0x4ea5f6=_0x141f73['actor'][_0x439506(0x15b)]||'Sin\x20nombre');let _0x3fa4dc=_0x439506(0x18a),_0x5ea8ed='N/A';_0x141f73[_0x439506(0x13c)]&&(_0x5ea8ed=_0x141f73['movie']['id']||_0x439506(0x18a),_0x3fa4dc=_0x141f73[_0x439506(0x13c)][_0x439506(0x18d)]||_0x439506(0x168));const _0x6eeb38=document[_0x439506(0x141)]('div');_0x6eeb38['className']=_0x439506(0x178),_0x6eeb38[_0x439506(0x184)]=_0x439506(0x163)+_0x2a82d2+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>ID:</strong>\x20'+_0x26b27c+_0x439506(0x17a)+_0x4ea5f6+_0x439506(0x12e)+_0x2c99bf+_0x439506(0x14a)+_0x3fa4dc+'\x20(ID:\x20'+_0x5ea8ed+_0x439506(0x142),_0x6eeb38[_0x439506(0x16a)](_0x439506(0x162),_0x589ae6=>{const _0x32d581=_0x439506;!_0x589ae6[_0x32d581(0x146)][_0x32d581(0x16b)](_0x32d581(0x166))&&showRelationDetails(_0x26b27c);});const _0x8629e8=_0x6eeb38[_0x439506(0x136)](_0x439506(0x12a)),_0x2678ab=_0x6eeb38[_0x439506(0x136)]('.delete');_0x8629e8[_0x439506(0x16a)](_0x439506(0x162),_0x8e7623=>{const _0x3054d5=_0x439506;_0x8e7623[_0x3054d5(0x151)](),handleEditRelation(_0x141f73);}),_0x2678ab[_0x439506(0x16a)](_0x439506(0x162),_0x177e32=>{const _0x455f0d=_0x439506;_0x177e32[_0x455f0d(0x151)](),handleDeleteRelation(_0x26b27c);}),relationGrid[_0x439506(0x123)](_0x6eeb38);});}async function showRelationDetails(_0x3ef7fb){const _0xbce7a9=a0_0x4321c2;try{detailContent['innerHTML']=_0xbce7a9(0x164),showView(_0xbce7a9(0x149));const _0x24231f=await fetch(API_BASE_URL+_0xbce7a9(0x186)+_0x3ef7fb);if(!_0x24231f['ok'])throw new Error(_0xbce7a9(0x176));const _0xdc4a7e=await _0x24231f[_0xbce7a9(0x14c)]();console[_0xbce7a9(0x130)](_0xbce7a9(0x169),_0xdc4a7e);let _0x5ab890;try{_0x5ab890=JSON[_0xbce7a9(0x16d)](_0xdc4a7e);}catch(_0x2a8eca){console[_0xbce7a9(0x15f)](_0xbce7a9(0x152),_0x2a8eca);throw new Error(_0xbce7a9(0x179)+_0x2a8eca[_0xbce7a9(0x159)]);}console[_0xbce7a9(0x130)](_0xbce7a9(0x174),_0x5ab890);const _0x137dd4=_0x5ab890[_0xbce7a9(0x177)]||_0xbce7a9(0x155),_0x3f2c16=_0x5ab890['id']||_0xbce7a9(0x18f);let _0x37601b=_0xbce7a9(0x18a),_0x322ab1='N/A';_0x5ab890[_0xbce7a9(0x189)]&&(_0x322ab1=_0x5ab890[_0xbce7a9(0x189)]['id']||_0xbce7a9(0x18a),_0x37601b=_0x5ab890[_0xbce7a9(0x189)]['name']||_0xbce7a9(0x183));let _0x42c5cb=_0xbce7a9(0x18a),_0x7eec30=_0xbce7a9(0x18a);_0x5ab890[_0xbce7a9(0x13c)]&&(_0x7eec30=_0x5ab890[_0xbce7a9(0x13c)]['id']||'N/A',_0x42c5cb=_0x5ab890[_0xbce7a9(0x13c)][_0xbce7a9(0x18d)]||_0xbce7a9(0x168)),detailContent['innerHTML']=_0xbce7a9(0x163)+_0x137dd4+_0xbce7a9(0x182)+_0x3f2c16+_0xbce7a9(0x17a)+_0x37601b+_0xbce7a9(0x12e)+_0x322ab1+_0xbce7a9(0x14a)+_0x42c5cb+_0xbce7a9(0x12e)+_0x7eec30+_0xbce7a9(0x171);}catch(_0x1855e0){console['error'](_0xbce7a9(0x128),_0x1855e0),detailContent[_0xbce7a9(0x184)]=_0xbce7a9(0x11c)+_0x1855e0[_0xbce7a9(0x159)]+_0xbce7a9(0x185);}}function handleEditRelation(_0x2f81cc){const _0x468fe0=a0_0x4321c2;isEditMode=!![],formTitle[_0x468fe0(0x181)]='Editar\x20Relación',relationIdInput[_0x468fe0(0x133)]=_0x2f81cc['id']||'';let _0x365b12='';_0x2f81cc['actor']&&_0x2f81cc[_0x468fe0(0x189)]['id']&&(_0x365b12=_0x2f81cc[_0x468fe0(0x189)]['id']);document[_0x468fe0(0x11f)]('actorId')[_0x468fe0(0x133)]=_0x365b12;let _0x5629a7='';_0x2f81cc[_0x468fe0(0x13c)]&&_0x2f81cc['movie']['id']&&(_0x5629a7=_0x2f81cc[_0x468fe0(0x13c)]['id']),document['getElementById'](_0x468fe0(0x138))[_0x468fe0(0x133)]=_0x5629a7,document[_0x468fe0(0x11f)]('papel')[_0x468fe0(0x133)]=_0x2f81cc['papel']||'',showView(_0x468fe0(0x148));}async function handleDeleteRelation(_0x9a9081){const _0x3f77ba=a0_0x4321c2;if(!confirm(_0x3f77ba(0x158)))return;try{const _0x34baf6=await fetch(API_BASE_URL+_0x3f77ba(0x15e)+_0x9a9081,{'method':_0x3f77ba(0x120)});if(!_0x34baf6['ok'])throw new Error(_0x3f77ba(0x150));showNotification(_0x3f77ba(0x187),_0x3f77ba(0x12f)),fetchRelations();}catch(_0x5d3df7){console['error'](_0x3f77ba(0x128),_0x5d3df7),showNotification('Error:\x20'+_0x5d3df7[_0x3f77ba(0x159)],_0x3f77ba(0x135));}}async function handleSearch(){const _0x37aa35=a0_0x4321c2,_0x40e3bf=searchInput['value'][_0x37aa35(0x14f)]();if(!_0x40e3bf){alert(_0x37aa35(0x15a));return;}try{const _0x49ad44=await fetch(API_BASE_URL+_0x37aa35(0x186)+_0x40e3bf);if(!_0x49ad44['ok'])throw new Error(_0x37aa35(0x18c));const _0x444c07=await _0x49ad44[_0x37aa35(0x172)]();showRelationDetails(_0x444c07['id']);}catch(_0x507a84){console[_0x37aa35(0x15f)](_0x37aa35(0x128),_0x507a84),showNotification('Error:\x20'+_0x507a84[_0x37aa35(0x159)],_0x37aa35(0x135));}}async function handleFormSubmit(_0x1b1c93){const _0x39f22a=a0_0x4321c2;_0x1b1c93['preventDefault']();const _0x2b059b=document[_0x39f22a(0x11f)](_0x39f22a(0x175))[_0x39f22a(0x133)][_0x39f22a(0x14f)](),_0x204375=document[_0x39f22a(0x11f)](_0x39f22a(0x138))[_0x39f22a(0x133)][_0x39f22a(0x14f)](),_0x219f0b=document[_0x39f22a(0x11f)](_0x39f22a(0x177))[_0x39f22a(0x133)]['trim']();if(!_0x2b059b||!_0x204375||!_0x219f0b){showNotification(_0x39f22a(0x17e),_0x39f22a(0x135));return;}const _0x4d2372={'actor':{'id':_0x2b059b},'movie':{'id':_0x204375},'papel':_0x219f0b},_0x46d187=relationIdInput[_0x39f22a(0x133)];let _0x5733d1,_0xccdc6f;isEditMode&&_0x46d187?(_0x5733d1=API_BASE_URL+_0x39f22a(0x15c)+_0x46d187,_0xccdc6f='PUT',_0x4d2372['id']=_0x46d187):(_0x5733d1=API_BASE_URL+'/addActorMovie',_0xccdc6f=_0x39f22a(0x125));console[_0x39f22a(0x130)](_0x39f22a(0x131),JSON[_0x39f22a(0x167)](_0x4d2372)),console[_0x39f22a(0x130)]('URL:',_0x5733d1),console[_0x39f22a(0x130)](_0x39f22a(0x170),_0xccdc6f);try{const _0x186991=await fetch(_0x5733d1,{'method':_0xccdc6f,'headers':{'Content-Type':_0x39f22a(0x13a)},'body':JSON['stringify'](_0x4d2372)}),_0x48f307=await _0x186991[_0x39f22a(0x14c)]();console['log'](_0x39f22a(0x12d),_0x48f307);if(!_0x186991['ok'])throw new Error('Error\x20al\x20'+(isEditMode?'actualizar':'añadir')+_0x39f22a(0x13d)+_0x186991[_0x39f22a(0x160)]);showView('list'),addRelationForm[_0x39f22a(0x14b)](),relationIdInput[_0x39f22a(0x133)]='',isEditMode=![];const _0x10ea08=isEditMode?_0x39f22a(0x188):_0x39f22a(0x13e);showNotification(_0x39f22a(0x137)+_0x10ea08+_0x39f22a(0x14e),'success-message');}catch(_0x5d86ea){console[_0x39f22a(0x15f)](_0x39f22a(0x128),_0x5d86ea),showNotification('Error:\x20'+_0x5d86ea['message'],_0x39f22a(0x135));}}function a0_0x552e(){const _0x319ea9=['detailContent','.edit','3102405iWGGcR','9wrDVbx','Respuesta\x20del\x20servidor\x20(formulario):','\x20(ID:\x20','success-message','log','Enviando\x20datos:','<div\x20class=\x22loading\x22>No\x20hay\x20relaciones\x20disponibles</div>','value','6741055kdcKxy','error-message','querySelector','Relación\x20','movieId','btnSubmit','application/json','La\x20respuesta\x20no\x20es\x20un\x20array:','movie','\x20la\x20relación.\x20Servidor\x20respondió:\x20','añadida','8424493VqTmoA','relationForm','createElement',')</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22action-icons\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22icon-button\x20edit\x22\x20title=\x22Editar\x20relación\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22icon-button\x20delete\x22\x20title=\x22Eliminar\x20relación\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','hidden','classList','/getAllActorMovies','target','relationId','form','detail',')</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Película:</strong>\x20','reset','text','notification\x20','\x20con\x20éxito','trim','Error\x20al\x20eliminar\x20la\x20relación','stopPropagation','Error\x20al\x20parsear\x20JSON\x20de\x20detalles:','78NqJZFU','active','Sin\x20papel','length','isArray','¿Estás\x20seguro\x20de\x20que\x20deseas\x20eliminar\x20esta\x20relación?','message','Por\x20favor,\x20introduce\x20un\x20ID\x20válido\x20para\x20buscar','name','/updateActorMovie/','Añadir\x20Nueva\x20Relación','/deleteActorMovie/','error','status','addRelationForm','click','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Papel:\x20','<div\x20class=\x22loading\x22>Cargando\x20detalles...</div>','list','.action-icons','stringify','Sin\x20título','Respuesta\x20del\x20servidor\x20(detalles):','addEventListener','closest','6QLfSnK','parse','16433OJCRbb','relationList','Método:',')</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','json','7242470dXpIxh','Datos\x20de\x20la\x20relación:','actorId','Error\x20al\x20cargar\x20los\x20detalles\x20de\x20la\x20relación','papel','relation-card','Error\x20al\x20procesar\x20datos\x20de\x20detalles:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Actor:</strong>\x20','relationDetail','btnSearch','forEach','Por\x20favor,\x20complete\x20todos\x20los\x20campos','firstChild','<div\x20class=\x22loading\x22>Cargando\x20relaciones...</div>','textContent','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>ID:</strong>\x20','Sin\x20nombre','innerHTML','</div>','/getActorMovieById/','Relación\x20eliminada\x20con\x20éxito','actualizada','actor','N/A','add','No\x20se\x20encontró\x20ninguna\x20relación\x20con\x20ese\x20ID','title','formTitle','Sin\x20ID','<div\x20class=\x22error\x22>Error:\x20','http://localhost:8081/api','btnShowForm','getElementById','DELETE','insertBefore','remove','appendChild','5713184HdVGlg','POST','848100xNQEsC','Error\x20al\x20parsear\x20JSON:','Error:'];a0_0x552e=function(){return _0x319ea9;};return a0_0x552e();}function showNotification(_0xddd99e,_0x3ea7af){const _0x50aa48=a0_0x4321c2,_0x24f871=document['createElement']('div');_0x24f871['className']=_0x50aa48(0x14d)+_0x3ea7af,_0x24f871['textContent']=_0xddd99e;if(currentView===_0x50aa48(0x165))relationListSection[_0x50aa48(0x121)](_0x24f871,relationListSection['firstChild']);else{if(currentView===_0x50aa48(0x148))relationFormSection[_0x50aa48(0x121)](_0x24f871,relationFormSection[_0x50aa48(0x17f)]);else currentView===_0x50aa48(0x149)&&relationDetailSection[_0x50aa48(0x121)](_0x24f871,relationDetailSection['firstChild']);}setTimeout(()=>{const _0x2877be=_0x50aa48;_0x24f871[_0x2877be(0x122)]();},0xbb8);}function initApp(){const _0x546b3d=a0_0x4321c2;showView(_0x546b3d(0x165));}document[a0_0x4321c2(0x16a)]('DOMContentLoaded',initApp);